<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Q&A Synthesizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #0A0A0A;
        background-image: 
            radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 40% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%);
        color: #ffffff;
        min-height: 100vh;
        overflow-x: hidden;
    }

    .app-container {
        display: flex;
        min-height: 100vh;
    }

    .sidebar {
        width: 280px;
        background: rgba(30, 30, 30, 0.8);
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(147, 51, 234, 0.2);
        padding: 20px;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        z-index: 100;
    }

    .sidebar h2 {
        color: #a78bfa;
        margin-bottom: 20px;
        font-size: 18px;
        font-weight: 600;
    }

    .folder-item {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        margin-bottom: 8px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid transparent;
    }

    .folder-item:hover {
        background: rgba(147, 51, 234, 0.1);
        border-color: rgba(147, 51, 234, 0.3);
    }

    .folder-item.active {
        background: rgba(147, 51, 234, 0.2);
        border-color: rgba(147, 51, 234, 0.5);
        color: #a78bfa;
    }

    .folder-icon {
        width: 16px;
        height: 16px;
        margin-right: 12px;
        fill: currentColor;
    }

    .main-content {
        flex: 1;
        margin-left: 280px;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
    }

    .header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 16px;
    }

    .header p {
        color: #a78bfa;
        font-size: 1.1rem;
        opacity: 0.8;
    }

    .search-container {
        position: relative;
        max-width: 600px;
        margin: 0 auto 30px;
    }

    .search-input {
        width: 100%;
        padding: 16px 20px 16px 50px;
        background: rgba(30, 30, 30, 0.6);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 12px;
        color: #ffffff;
        font-size: 16px;
        outline: none;
        transition: all 0.3s ease;
    }

    .search-input:focus {
        border-color: rgba(147, 51, 234, 0.6);
        box-shadow: 0 0 20px rgba(147, 51, 234, 0.2);
    }

    .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        fill: #a78bfa;
    }

    .controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .control-group {
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .btn {
        padding: 10px 20px;
        background: rgba(30, 30, 30, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 8px;
        color: #a78bfa;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        outline: none;
    }

    .btn:hover {
        background: rgba(147, 51, 234, 0.1);
        border-color: rgba(147, 51, 234, 0.5);
        transform: translateY(-2px);
    }

    .btn.active {
        background: rgba(147, 51, 234, 0.3);
        border-color: rgba(147, 51, 234, 0.6);
        color: #ffffff;
    }

    .category-filter {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .category-btn {
        padding: 8px 16px;
        background: rgba(30, 30, 30, 0.6);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 20px;
        color: #a78bfa;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
    }

    .category-btn:hover {
        background: rgba(147, 51, 234, 0.1);
        transform: translateY(-2px);
    }

    .category-btn.active {
        background: rgba(147, 51, 234, 0.4);
        border-color: rgba(147, 51, 234, 0.6);
        color: #ffffff;
        box-shadow: 0 0 15px rgba(147, 51, 234, 0.3);
    }

    .qa-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        gap: 24px;
        margin-bottom: 40px;
    }

    .qa-card {
        background: rgba(30, 30, 30, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.2);
        border-radius: 12px;
        padding: 24px;
        position: relative;
        transition: all 0.3s ease;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .qa-card:hover {
        transform: translateY(-4px);
        border-color: rgba(147, 51, 234, 0.4);
        box-shadow: 0 12px 40px rgba(147, 51, 234, 0.1);
    }

    .qa-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
    }

    .qa-tags {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .tag {
        padding: 4px 8px;
        background: rgba(147, 51, 234, 0.2);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 12px;
        font-size: 12px;
        color: #a78bfa;
    }

    .qa-actions {
        display: flex;
        gap: 8px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .qa-card:hover .qa-actions {
        opacity: 1;
    }

    .action-btn {
        width: 32px;
        height: 32px;
        border: none;
        border-radius: 8px;
        background: rgba(30, 30, 30, 0.8);
        color: #a78bfa;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .action-btn:hover {
        background: rgba(147, 51, 234, 0.2);
        transform: scale(1.1);
    }

    .rating {
        display: flex;
        gap: 4px;
        margin-bottom: 12px;
    }

    .star {
        width: 16px;
        height: 16px;
        fill: #374151;
        cursor: pointer;
        transition: fill 0.3s ease;
    }

    .star.filled {
        fill: #fbbf24;
    }

    .star:hover {
        fill: #f59e0b;
    }

    .qa-question {
        font-size: 18px;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 12px;
        line-height: 1.4;
    }

    .qa-answer {
        color: #d1d5db;
        line-height: 1.6;
        margin-bottom: 16px;
    }

    .qa-answer.collapsed {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .expand-btn {
        color: #a78bfa;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        padding: 4px 0;
        transition: color 0.3s ease;
    }

    .expand-btn:hover {
        color: #8b5cf6;
    }

    .qa-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #6b7280;
        font-size: 14px;
    }

    .analytics-section {
        background: rgba(30, 30, 30, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.2);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 40px;
    }

    .analytics-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .analytics-title {
        font-size: 20px;
        font-weight: 600;
        color: #a78bfa;
    }

    .analytics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .analytics-card {
        background: rgba(147, 51, 234, 0.1);
        border: 1px solid rgba(147, 51, 234, 0.2);
        border-radius: 8px;
        padding: 16px;
        text-align: center;
    }

    .analytics-value {
        font-size: 28px;
        font-weight: 700;
        color: #8b5cf6;
    }

    .analytics-label {
        color: #a78bfa;
        font-size: 14px;
        margin-top: 4px;
    }

    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .modal.active {
        opacity: 1;
        visibility: visible;
    }

    .modal-content {
        background: rgba(30, 30, 30, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 16px;
        padding: 32px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        transform: scale(0.9);
        transition: transform 0.3s ease;
    }

    .modal.active .modal-content {
        transform: scale(1);
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
    }

    .modal-title {
        font-size: 24px;
        font-weight: 600;
        color: #a78bfa;
    }

    .close-btn {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 8px;
        background: rgba(147, 51, 234, 0.2);
        color: #a78bfa;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .close-btn:hover {
        background: rgba(147, 51, 234, 0.4);
        transform: scale(1.1);
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-label {
        display: block;
        color: #a78bfa;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .form-input, .form-textarea, .form-select {
        width: 100%;
        padding: 12px 16px;
        background: rgba(30, 30, 30, 0.6);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 8px;
        color: #ffffff;
        font-size: 16px;
        outline: none;
        transition: all 0.3s ease;
    }

    .form-textarea {
        min-height: 120px;
        resize: vertical;
    }

    .form-input:focus, .form-textarea:focus, .form-select:focus {
        border-color: rgba(147, 51, 234, 0.6);
        box-shadow: 0 0 10px rgba(147, 51, 234, 0.2);
    }

    .modal-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        margin-top: 24px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
        border: none;
        color: #ffffff;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(147, 51, 234, 0.3);
    }

    .btn-secondary {
        background: rgba(107, 114, 128, 0.2);
        border: 1px solid rgba(107, 114, 128, 0.3);
        color: #d1d5db;
    }

    .btn-danger {
        background: rgba(239, 68, 68, 0.2);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #fca5a5;
    }

    .btn-danger:hover {
        background: rgba(239, 68, 68, 0.3);
        border-color: rgba(239, 68, 68, 0.5);
    }

    .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(30, 30, 30, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 8px;
        padding: 16px 20px;
        color: #ffffff;
        z-index: 1100;
        transform: translateX(400px);
        transition: transform 0.3s ease;
    }

    .toast.show {
        transform: translateX(0);
    }

    .toast.success {
        border-color: rgba(34, 197, 94, 0.3);
    }

    .toast.error {
        border-color: rgba(239, 68, 68, 0.3);
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #6b7280;
    }

    .empty-state h3 {
        font-size: 24px;
        margin-bottom: 12px;
        color: #a78bfa;
    }

    .empty-state p {
        font-size: 16px;
        opacity: 0.8;
    }

    .batch-actions {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(30, 30, 30, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(147, 51, 234, 0.3);
        border-radius: 12px;
        padding: 16px 24px;
        display: flex;
        align-items: center;
        gap: 16px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 200;
    }

    .batch-actions.show {
        opacity: 1;
        visibility: visible;
    }

    .batch-count {
        color: #a78bfa;
        font-weight: 600;
    }

    .checkbox {
        position: absolute;
        top: 12px;
        left: 12px;
        width: 20px;
        height: 20px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .qa-card:hover .checkbox {
        opacity: 1;
    }

    .qa-card.selected {
        border-color: rgba(147, 51, 234, 0.6);
        background: rgba(147, 51, 234, 0.1);
    }

    .qa-card.selected .checkbox {
        opacity: 1;
    }

    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .main-content {
            margin-left: 0;
        }

        .qa-grid {
            grid-template-columns: 1fr;
        }

        .controls {
            flex-direction: column;
            align-items: center;
        }

        .category-filter {
            justify-content: flex-start;
            overflow-x: auto;
            padding-bottom: 10px;
        }
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .glow {
        box-shadow: 0 0 20px rgba(147, 51, 234, 0.1);
    }

    .glow:hover {
        box-shadow: 0 0 30px rgba(147, 51, 234, 0.2);
    }
</style>
```

</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <h2>📁 Folders</h2>
            <div id="folderList">
                <div class="folder-item active" data-folder="all">
                    <svg class="folder-icon" viewBox="0 0 24 24">
                        <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                    </svg>
                    All Prompts
                </div>
                <div class="folder-item" data-folder="favorites">
                    <svg class="folder-icon" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    Favorites
                </div>
                <div class="folder-item" data-folder="archive">
                    <svg class="folder-icon" viewBox="0 0 24 24">
                        <path d="M21 8V7l-3-3H6L3 7v1h18zM3 9v9c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9H3z"/>
                    </svg>
                    Archive
                </div>
                <div class="folder-item" data-folder="default">
                    <svg class="folder-icon" viewBox="0 0 24 24">
                        <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                    </svg>
                    Default
                </div>
            </div>

```
        <div style="margin-top: 20px;">
            <button class="btn" onclick="showAddFolderDialog()">
                <svg style="width: 16px; height: 16px; margin-right: 8px;" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                Add Folder
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <h1>🤖 ChatGPT Q&A Synthesizer</h1>
            <p>Organize, categorize, and manage your ChatGPT conversations with intelligence</p>
        </div>

        <!-- Search -->
        <div class="search-container">
            <svg class="search-icon" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Search prompts or type a new prompt and press Enter..." />
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="control-group">
                <button class="btn active" id="sortNewest" onclick="setSortBy('newest')">
                    <svg style="width: 16px; height: 16px; margin-right: 4px;" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/>
                    </svg>
                    Newest
                </button>
                <button class="btn" id="sortOldest" onclick="setSortBy('oldest')">Oldest</button>
                <button class="btn" id="sortViewed" onclick="setSortBy('mostViewed')">Most Viewed</button>
            </div>
            <div class="control-group">
                <button class="btn" onclick="toggleAnalytics()">
                    <svg style="width: 16px; height: 16px; margin-right: 4px;" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/>
                    </svg>
                    Analytics
                </button>
                <button class="btn" onclick="exportData()">Export</button>
                <button class="btn" onclick="showImportDialog()">Import</button>
            </div>
        </div>

        <!-- Category Filter -->
        <div class="category-filter" id="categoryFilter">
            <button class="category-btn active" onclick="setCategory('')">All</button>
            <button class="category-btn" onclick="setCategory('coding')">Coding</button>
            <button class="category-btn" onclick="setCategory('business')">Business</button>
            <button class="category-btn" onclick="setCategory('marketing')">Marketing</button>
            <button class="category-btn" onclick="setCategory('design')">Design</button>
            <button class="category-btn" onclick="setCategory('productivity')">Productivity</button>
            <button class="category-btn" onclick="setCategory('ai')">AI</button>
            <button class="category-btn" onclick="setCategory('career')">Career</button>
            <button class="category-btn" onclick="setCategory('education')">Education</button>
            <button class="category-btn" onclick="setCategory('finance')">Finance</button>
            <button class="category-btn" onclick="setCategory('health')">Health</button>
            <button class="category-btn" onclick="setCategory('lifestyle')">Lifestyle</button>
        </div>

        <!-- Analytics Section -->
        <div class="analytics-section" id="analyticsSection" style="display: none;">
            <div class="analytics-header">
                <h2 class="analytics-title">📊 Analytics Dashboard</h2>
                <button class="btn" onclick="toggleAnalytics()">Hide</button>
            </div>
            <div class="analytics-grid" id="analyticsGrid">
                <!-- Analytics cards will be populated by JavaScript -->
            </div>
        </div>

        <!-- QA Grid -->
        <div class="qa-grid" id="qaGrid">
            <!-- QA cards will be populated by JavaScript -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <h3>No prompts found</h3>
            <p>Start by typing a prompt in the search box above and pressing Enter.</p>
        </div>
    </div>
</div>

<!-- Batch Actions Bar -->
<div class="batch-actions" id="batchActions">
    <span class="batch-count" id="batchCount">0 selected</span>
    <button class="btn" onclick="moveSelectedToFolder('favorites')">Move to Favorites</button>
    <button class="btn" onclick="moveSelectedToFolder('archive')">Move to Archive</button>
    <button class="btn btn-danger" onclick="deleteSelected()">Delete Selected</button>
</div>

<!-- Edit Modal -->
<div class="modal" id="editModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Edit Prompt</h2>
            <button class="close-btn" onclick="closeEditModal()">
                <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        <form id="editForm">
            <div class="form-group">
                <label class="form-label">Question</label>
                <textarea class="form-textarea" id="editQuestion" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Answer</label>
                <textarea class="form-textarea" id="editAnswer" rows="6"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Category</label>
                <select class="form-select" id="editCategory">
                    <option value="general">General</option>
                    <option value="coding">Coding</option>
                    <option value="business">Business</option>
                    <option value="marketing">Marketing</option>
                    <option value="design">Design</option>
                    <option value="productivity">Productivity</option>
                    <option value="ai">AI</option>
                    <option value="career">Career</option>
                    <option value="education">Education</option>
                    <option value="finance">Finance</option>
                    <option value="health">Health</option>
                    <option value="lifestyle">Lifestyle</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Tags (comma-separated)</label>
                <input type="text" class="form-input" id="editTags" placeholder="tag1, tag2, tag3" />
            </div>
            <div class="form-group">
                <label class="form-label">Folder</label>
                <select class="form-select" id="editFolder">
                    <option value="default">Default</option>
                    <option value="favorites">Favorites</option>
                    <option value="archive">Archive</option>
                </select>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="deleteCurrentPrompt()">Delete</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Folder Modal -->
<div class="modal" id="addFolderModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add New Folder</h2>
            <button class="close-btn" onclick="closeAddFolderModal()">
                <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        <form id="addFolderForm">
            <div class="form-group">
                <label class="form-label">Folder Name</label>
                <input type="text" class="form-input" id="folderName" placeholder="Enter folder name" required />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeAddFolderModal()">Cancel</button>
                <button type="submit" class="btn btn-primary">Create Folder</button>
            </div>
        </form>
    </div>
</div>

<!-- Import Modal -->
<div class="modal" id="importModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Import Data</h2>
            <button class="close-btn" onclick="closeImportModal()">
                <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        <form id="importForm">
            <div class="form-group">
                <label class="form-label">Import JSON Data</label>
                <textarea class="form-textarea" id="importData" rows="10" placeholder="Paste your JSON data here..."></textarea>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeImportModal()">Cancel</button>
                <button type="submit" class="btn btn-primary">Import Data</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Database and State Management
    class QADatabase {
        constructor() {
            this.data = {
                qas: [],
                folders: ['all', 'favorites', 'archive', 'default'],
                settings: {
                    currentFolder: 'all',
                    currentCategory: '',
                    sortBy: 'newest',
                    searchTerm: ''
                }
            };
            this.selectedItems = new Set();
            this.currentEditId = null;
            this.loadData();
            this.initializeApp();
        }

        generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        saveData() {
            try {
                const dataToSave = {
                    ...this.data,
                    lastSaved: new Date().toISOString()
                };
                // Using memory storage instead of localStorage
                window.qaData = dataToSave;
                this.showToast('Data saved successfully', 'success');
            } catch (error) {
                this.showToast('Failed to save data', 'error');
                console.error('Save error:', error);
            }
        }

        loadData() {
            try {
                const saved = window.qaData;
                if (saved) {
                    this.data = { ...this.data, ...saved };
                }
                
                // Add some sample data if empty
                if (this.data.qas.length === 0) {
                    this.addSampleData();
                }
            } catch (error) {
                console.error('Load error:', error);
                this.addSampleData();
            }
        }

        addSampleData() {
            const sampleQAs = [
                {
                    id: this.generateId(),
                    question: "How do I implement a binary search algorithm in Python?",
                    answer: "A binary search algorithm can be implemented recursively or iteratively. Here's an iterative approach:\n\n```python\ndef binary_search(arr, target):\n    left, right = 0, len(arr) - 1\n    \n    while left <= right:\n        mid = (left + right) // 2\n        \n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    \n    return -1\n```\n\nThis algorithm has O(log n) time complexity.",
                    category: "coding",
                    tags: ["python", "algorithm", "binary-search", "programming"],
                    folder: "default",
                    rating: 5,
                    views: 15,
                    timestamp: Date.now() - 86400000,
                    score: 9
                },
                {
                    id: this.generateId(),
                    question: "What are the key principles of effective marketing?",
                    answer: "Effective marketing is built on several key principles:\n\n1. **Know Your Audience**: Understand your target market's needs, preferences, and pain points\n2. **Value Proposition**: Clearly communicate what makes your product/service unique\n3. **Consistency**: Maintain consistent messaging across all channels\n4. **Data-Driven Decisions**: Use analytics to measure and optimize campaigns\n5. **Customer-Centric Approach**: Focus on solving customer problems rather than just selling\n6. **Multi-Channel Strategy**: Reach customers where they are most active\n7. **Continuous Testing**: A/B test different approaches to find what works best",
                    category: "marketing",
                    tags: ["marketing", "strategy", "business", "customer"],
                    folder: "favorites",
                    rating: 4,
                    views: 23,
                    timestamp: Date.now() - 172800000,
                    score: 8
                },
                {
                    id: this.generateId(),
                    question: "How can I improve my productivity while working from home?",
                    answer: "Working from home effectively requires discipline and structure. Here are proven strategies:\n\n**Environment Setup:**\n- Create a dedicated workspace\n- Ensure good lighting and ergonomics\n- Minimize distractions\n\n**Time Management:**\n- Set regular working hours\n- Use time-blocking techniques\n- Take regular breaks (Pomodoro Technique)\n\n**Communication:**\n- Overcommunicate with team members\n- Use collaborative tools effectively\n- Set clear boundaries with family/roommates\n\n**Health & Wellness:**\n- Take regular walks\n- Stay hydrated\n- Maintain social connections",
                    category: "productivity",
                    tags: ["productivity", "remote-work", "time-management", "wellness"],
                    folder: "default",
                    rating: 5,
                    views: 31,
                    timestamp: Date.now() - 259200000,
                    score: 8
                }
            ];

            this.data.qas = sampleQAs;
            this.saveData();
        }

        categorizePrompt(prompt) {
            const categories = {
                coding: ['code', 'programming', 'javascript', 'python', 'react', 'function', 'api', 'database', 'algorithm', 'debug', 'git', 'html', 'css'],
                business: ['business', 'strategy', 'company', 'startup', 'management', 'leadership', 'enterprise', 'profit', 'revenue', 'growth'],
                marketing: ['marketing', 'advertising', 'brand', 'customer', 'social media', 'campaign', 'content', 'seo', 'conversion', 'funnel'],
                design: ['design', 'ui', 'ux', 'layout', 'visual', 'color', 'typography', 'interface', 'wireframe', 'prototype'],
                productivity: ['productivity', 'time management', 'organization', 'efficiency', 'workflow', 'task', 'planning', 'goals', 'focus'],
                ai: ['ai', 'artificial intelligence', 'machine learning', 'neural', 'model', 'gpt', 'chatbot', 'automation', 'nlp'],
                career: ['career', 'job', 'interview', 'resume', 'professional', 'skill', 'workplace', 'promotion', 'networking'],
                education: ['education', 'learning', 'study', 'teach', 'course', 'training', 'knowledge', 'university', 'research'],
                finance: ['finance', 'money', 'investment', 'budget', 'financial', 'economy', 'market', 'trading', 'crypto'],
                health: ['health', 'wellness', 'fitness', 'medical', 'mental health', 'exercise', 'nutrition', 'diet', 'sleep'],
                lifestyle: ['lifestyle', 'life', 'personal', 'habit', 'routine', 'balance', 'self-improvement', 'motivation', 'happiness']
            };

            const lowerPrompt = prompt.toLowerCase();
            let maxMatches = 0;
            let bestCategory = 'general';

            for (const [category, keywords] of Object.entries(categories)) {
                const matches = keywords.filter(keyword => lowerPrompt.includes(keyword)).length;
                if (matches > maxMatches) {
                    maxMatches = matches;
                    bestCategory = category;
                }
            }

            return bestCategory;
        }

        addPrompt(question, answer = null) {
            const category = this.categorizePrompt(question);
            const generatedAnswer = answer || `This is a comprehensive response to your question about "${question}". In a real application, this would be generated by an AI model based on the context and complexity of your query.`;
            
            const tags = [
                category,
                ...question.toLowerCase().split(' ')
                    .filter(word => word.length > 4)
                    .slice(0, 3)
            ];

            const newQA = {
                id: this.generateId(),
                question: question.trim(),
                answer: generatedAnswer,
                category,
                tags: [...new Set(tags)],
                folder: 'default',
                rating: 0,
                views: 0,
                timestamp: Date.now(),
                score: Math.floor(Math.random() * 3) + 7 // Random score between 7-10
            };

            this.data.qas.unshift(newQA);
            this.saveData();
            this.data.settings.currentCategory = category;
            this.updateDisplay();
            this.showToast(`Prompt added to ${category} category`, 'success');
            return newQA;
        }

        updatePrompt(id, updates) {
            const index = this.data.qas.findIndex(qa => qa.id === id);
            if (index !== -1) {
                this.data.qas[index] = { ...this.data.qas[index], ...updates };
                this.saveData();
                this.updateDisplay();
                this.showToast('Prompt updated successfully', 'success');
            }
        }

        deletePrompt(id) {
            this.data.qas = this.data.qas.filter(qa => qa.id !== id);
            this.selectedItems.delete(id);
            this.saveData();
            this.updateDisplay();
            this.showToast('Prompt deleted', 'success');
        }

        getFilteredQAs() {
            let filtered = [...this.data.qas];

            // Filter by folder
            if (this.data.settings.currentFolder !== 'all') {
                filtered = filtered.filter(qa => qa.folder === this.data.settings.currentFolder);
            }

            // Filter by category
            if (this.data.settings.currentCategory) {
                filtered = filtered.filter(qa => qa.category === this.data.settings.currentCategory);
            }

            // Filter by search term
            if (this.data.settings.searchTerm) {
                const term = this.data.settings.searchTerm.toLowerCase();
                filtered = filtered.filter(qa => 
                    qa.question.toLowerCase().includes(term) ||
                    qa.answer.toLowerCase().includes(term) ||
                    qa.tags.some(tag => tag.toLowerCase().includes(term))
                );
            }

            // Sort
            filtered.sort((a, b) => {
                switch (this.data.settings.sortBy) {
                    case 'newest':
                        return b.timestamp - a.timestamp;
                    case 'oldest':
                        return a.timestamp - b.timestamp;
                    case 'mostViewed':
                        return b.views - a.views;
                    default:
                        return 0;
                }
            });

            return filtered;
        }

        initializeApp() {
            this.setupEventListeners();
            this.updateDisplay();
            this.showToast('ChatGPT Q&A Synthesizer loaded successfully', 'success');
        }

        setupEventListeners() {
            // Search input
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', (e) => {
                this.data.settings.searchTerm = e.target.value;
                this.updateDisplay();
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.target.value.trim()) {
                    this.addPrompt(e.target.value.trim());
                    e.target.value = '';
                    this.data.settings.searchTerm = '';
                }
            });

            // Folder selection
            document.getElementById('folderList').addEventListener('click', (e) => {
                const folderItem = e.target.closest('.folder-item');
                if (folderItem) {
                    const folder = folderItem.dataset.folder;
                    this.setCurrentFolder(folder);
                }
            });

            // Edit form submission
            document.getElementById('editForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.saveEditedPrompt();
            });

            // Add folder form
            document.getElementById('addFolderForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.addFolder();
            });

            // Import form
            document.getElementById('importForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.importData();
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey || e.metaKey) {
                    switch (e.key) {
                        case 'k':
                            e.preventDefault();
                            searchInput.focus();
                            break;
                        case 's':
                            e.preventDefault();
                            this.saveData();
                            break;
                    }
                }
            });
        }

        setCurrentFolder(folder) {
            this.data.settings.currentFolder = folder;
            this.selectedItems.clear();
            this.updateDisplay();
            
            // Update folder UI
            document.querySelectorAll('.folder-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-folder="${folder}"]`).classList.add('active');
        }

        updateDisplay() {
            this.renderQACards();
            this.updateAnalytics();
            this.updateBatchActions();
        }

        renderQACards() {
            const grid = document.getElementById('qaGrid');
            const emptyState = document.getElementById('emptyState');
            const filteredQAs = this.getFilteredQAs();

            if (filteredQAs.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            emptyState.style.display = 'none';

            grid.innerHTML = filteredQAs.map(qa => this.createQACard(qa)).join('');
        }

        createQACard(qa) {
            const isSelected = this.selectedItems.has(qa.id);
            const isExpanded = qa.expanded || false;
            const answerPreview = qa.answer.length > 200 ? qa.answer.substring(0, 200) + '...' : qa.answer;

            return `
                <div class="qa-card fade-in glow ${isSelected ? 'selected' : ''}" data-id="${qa.id}">
                    <input type="checkbox" class="checkbox" ${isSelected ? 'checked' : ''} 
                           onchange="toggleSelection('${qa.id}')" onclick="event.stopPropagation()">
                    
                    <div class="qa-card-header">
                        <div class="qa-tags">
                            <span class="tag">${qa.category}</span>
                            <span class="tag">${qa.folder}</span>
                            <span class="tag">⭐ ${qa.score}/10</span>
                            ${qa.tags.slice(0, 2).map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                        <div class="qa-actions">
                            <button class="action-btn" onclick="editPrompt('${qa.id}')" title="Edit">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                            </button>
                            <button class="action-btn" onclick="copyPrompt('${qa.id}')" title="Copy">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                            </button>
                            <button class="action-btn" onclick="sharePrompt('${qa.id}')" title="Share">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="rating">
                        ${[1,2,3,4,5].map(star => `
                            <svg class="star ${star <= qa.rating ? 'filled' : ''}" 
                                 onclick="setRating('${qa.id}', ${star})" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        `).join('')}
                    </div>

                    <h3 class="qa-question">${qa.question}</h3>
                    <div class="qa-answer ${!isExpanded ? 'collapsed' : ''}" data-id="${qa.id}">
                        ${isExpanded ? qa.answer : answerPreview}
                    </div>
                    
                    ${qa.answer.length > 200 ? `
                        <button class="expand-btn" onclick="toggleExpand('${qa.id}')">
                            ${isExpanded ? 'Show less ↑' : 'Show more ↓'}
                        </button>
                    ` : ''}

                    <div class="qa-footer">
                        <span>👁️ ${qa.views} views</span>
                        <span>${new Date(qa.timestamp).toLocaleDateString()}</span>
                    </div>
                </div>
            `;
        }

        increaseViews(id) {
            const qa = this.data.qas.find(item => item.id === id);
            if (qa) {
                qa.views++;
                this.saveData();
            }
        }

        updateAnalytics() {
            const analyticsGrid = document.getElementById('analyticsGrid');
            const qas = this.data.qas;
            
            const totalPrompts = qas.length;
            const totalViews = qas.reduce((sum, qa) => sum + qa.views, 0);
            const averageScore = qas.length > 0 ? (qas.reduce((sum, qa) => sum + qa.score, 0) / qas.length).toFixed(1) : 0;
            const averageRating = qas.length > 0 ? (qas.reduce((sum, qa) => sum + qa.rating, 0) / qas.length).toFixed(1) : 0;

            const categoryStats = {};
            qas.forEach(qa => {
                categoryStats[qa.category] = (categoryStats[qa.category] || 0) + 1;
            });

            const topCategory = Object.keys(categoryStats).reduce((a, b) => 
                categoryStats[a] > categoryStats[b] ? a : b, 'none');

            analyticsGrid.innerHTML = `
                <div class="analytics-card">
                    <div class="analytics-value">${totalPrompts}</div>
                    <div class="analytics-label">Total Prompts</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value">${totalViews}</div>
                    <div class="analytics-label">Total Views</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value">${averageScore}</div>
                    <div class="analytics-label">Avg Score</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value">${averageRating}</div>
                    <div class="analytics-label">Avg Rating</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value">${topCategory}</div>
                    <div class="analytics-label">Top Category</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value">${Object.keys(categoryStats).length}</div>
                    <div class="analytics-label">Categories</div>
                </div>
            `;
        }

        updateBatchActions() {
            const batchActions = document.getElementById('batchActions');
            const batchCount = document.getElementById('batchCount');
            const selectedCount = this.selectedItems.size;

            if (selectedCount > 0) {
                batchActions.classList.add('show');
                batchCount.textContent = `${selectedCount} selected`;
            } else {
                batchActions.classList.remove('show');
            }
        }

        addFolder() {
            const folderName = document.getElementById('folderName').value.trim();
            if (folderName && !this.data.folders.includes(folderName)) {
                this.data.folders.push(folderName);
                this.saveData();
                this.renderFolders();
                this.showToast(`Folder "${folderName}" created`, 'success');
                this.closeAddFolderModal();
            }
        }

        renderFolders() {
            const folderList = document.getElementById('folderList');
            const currentFolder = this.data.settings.currentFolder;
            
            folderList.innerHTML = this.data.folders.map(folder => `
                <div class="folder-item ${folder === currentFolder ? 'active' : ''}" data-folder="${folder}">
                    <svg class="folder-icon" viewBox="0 0 24 24">
                        <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                    </svg>
                    ${folder.charAt(0).toUpperCase() + folder.slice(1)}
                </div>
            `).join('');
        }

        showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        exportData() {
            const dataStr = JSON.stringify(this.data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `qa-synthesizer-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            this.showToast('Data exported successfully', 'success');
        }

        importData() {
            const importData = document.getElementById('importData').value.trim();
            if (!importData) return;

            try {
                const parsedData = JSON.parse(importData);
                if (parsedData.qas && Array.isArray(parsedData.qas)) {
                    this.data = { ...this.data, ...parsedData };
                    this.saveData();
                    this.updateDisplay();
                    this.renderFolders();
                    this.showToast('Data imported successfully', 'success');
                    this.closeImportModal();
                } else {
                    throw new Error('Invalid data format');
                }
            } catch (error) {
                this.showToast('Import failed: Invalid JSON format', 'error');
            }
        }

        // Modal methods
        closeEditModal() {
            document.getElementById('editModal').classList.remove('active');
            this.currentEditId = null;
        }

        closeAddFolderModal() {
            document.getElementById('addFolderModal').classList.remove('active');
            document.getElementById('folderName').value = '';
        }

        closeImportModal() {
            document.getElementById('importModal').classList.remove('active');
            document.getElementById('importData').value = '';
        }

        saveEditedPrompt() {
            if (!this.currentEditId) return;

            const updates = {
                question: document.getElementById('editQuestion').value.trim(),
                answer: document.getElementById('editAnswer').value.trim(),
                category: document.getElementById('editCategory').value,
                tags: document.getElementById('editTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                folder: document.getElementById('editFolder').value
            };

            this.updatePrompt(this.currentEditId, updates);
            this.closeEditModal();
        }

        deleteCurrentPrompt() {
            if (this.currentEditId && confirm('Are you sure you want to delete this prompt?')) {
                this.deletePrompt(this.currentEditId);
                this.closeEditModal();
            }
        }
    }

    // Initialize the database
    const db = new QADatabase();

    // Global functions for UI interactions
    function setSortBy(sortBy) {
        db.data.settings.sortBy = sortBy;
        db.updateDisplay();
        
        // Update UI
        document.querySelectorAll('[id^="sort"]').forEach(btn => btn.classList.remove('active'));
        document.getElementById('sort' + sortBy.charAt(0).toUpperCase() + sortBy.slice(1)).classList.add('active');
    }

    function setCategory(category) {
        db.data.settings.currentCategory = category;
        db.updateDisplay();
        
        // Update UI
        document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }

    function toggleSelection(id) {
        if (db.selectedItems.has(id)) {
            db.selectedItems.delete(id);
        } else {
            db.selectedItems.add(id);
        }
        db.updateBatchActions();
    }

    function editPrompt(id) {
        const qa = db.data.qas.find(item => item.id === id);
        if (!qa) return;

        db.currentEditId = id;
        document.getElementById('editQuestion').value = qa.question;
        document.getElementById('editAnswer').value = qa.answer;
        document.getElementById('editCategory').value = qa.category;
        document.getElementById('editTags').value = qa.tags.join(', ');
        document.getElementById('editFolder').value = qa.folder;
        document.getElementById('editModal').classList.add('active');
    }

    function copyPrompt(id) {
        const qa = db.data.qas.find(item => item.id === id);
        if (!qa) return;

        const text = `Q: ${qa.question}\n\nA: ${qa.answer}`;
        navigator.clipboard.writeText(text).then(() => {
            db.showToast('Copied to clipboard', 'success');
        }).catch(() => {
            db.showToast('Failed to copy', 'error');
        });
    }

    function sharePrompt(id) {
        const qa = db.data.qas.find(item => item.id === id);
        if (!qa) return;

        const shareUrl = `${window.location.origin}${window.location.pathname}?id=${id}`;
        
        if (navigator.share) {
            navigator.share({
                title: qa.question,
                text: qa.answer,
                url: shareUrl
            });
        } else {
            navigator.clipboard.writeText(shareUrl).then(() => {
                db.showToast('Share link copied to clipboard', 'success');
            });
        }
    }

    function setRating(id, rating) {
        const qa = db.data.qas.find(item => item.id === id);
        if (qa) {
            qa.rating = qa.rating === rating ? 0 : rating;
            db.saveData();
            db.updateDisplay();
        }
    }

    function toggleExpand(id) {
        const qa = db.data.qas.find(item => item.id === id);
        if (qa) {
            qa.expanded = !qa.expanded;
            if (qa.expanded) {
                db.increaseViews(id);
            }
            db.updateDisplay();
        }
    }

    function toggleAnalytics() {
        const analyticsSection = document.getElementById('analyticsSection');
        const isVisible = analyticsSection.style.display !== 'none';
        analyticsSection.style.display = isVisible ? 'none' : 'block';
    }

    function moveSelectedToFolder(folder) {
        const selectedIds = Array.from(db.selectedItems);
        selectedIds.forEach(id => {
            const qa = db.data.qas.find(item => item.id === id);
            if (qa) qa.folder = folder;
        });
        
        db.selectedItems.clear();
        db.saveData();
        db.updateDisplay();
        db.showToast(`Moved ${selectedIds.length} prompts to ${folder}`, 'success');
    }

    function deleteSelected() {
        if (confirm(`Are you sure you want to delete ${db.selectedItems.size} prompts?`)) {
            Array.from(db.selectedItems).forEach(id => {
                db.deletePrompt(id);
            });
            db.selectedItems.clear();
            db.updateDisplay();
        }
    }

    function showAddFolderDialog() {
        document.getElementById('addFolderModal').classList.add('active');
    }

    function showImportDialog() {
        document.getElementById('importModal').classList.add('active');
    }

    function exportData() {
        db.exportData();
    }

    // Close modals when clicking outside
    document.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
            e.target.classList.remove('active');
        }
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            document.querySelectorAll('.modal.active').forEach(modal => {
                modal.classList.remove('active');
            });
        }
    });

    // Initialize app
    document.addEventListener('DOMContentLoaded', () => {
        console.log('🤖 ChatGPT Q&A Synthesizer initialized successfully!');
    });
</script>
```

</body>
</html>
